<!DOCTYPE html>
<html lang="en">
<head>
    <title>SRS document</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../style.css" />
</head>

<body>
	<h1>Requirements</h1>
	<hr>
	<h2><a name="ct">Table of contents</a></h2>
	<ol>
	  	<li><a href="#fr">Functional Requirements</a></li>
	  	<li><a href="#eir">External Interface Requirements</a>
	  		<ol>
	  			<li><a href="#ui">User Interfaces</a></li>
	  			<li><a href="#hi">Hardware Interfaces</a></li>
	  			<li><a href="#si">Software Interfaces</a></li>
	  			<li><a href="#ci">Communications Interfaces</a></li>
	  		</ol>
	  	</li>
	 	<li><a href="#performance">Performance Requirements</a></li>
	  	<li><a href="#design">Design Constraints</a>
			<ol>
				<li><a href="#hl">Hardware Limitations</a></li>
			</ol>
		</li>
		<li><a href="#attributes">Attributes</a>
			<ol>
				  <li><a href="#av">Availability</a></li>
				<li><a href="#se">Security</a></li>
				<li><a href="#ma">Maintainability</a></li>
				<li><a href="#tr">Transferability/Conversion</a></li>
			</ol>
		</li>
		<li><a href="#requirements">Other Requirements</a>
			<ol>
				  <li><a href="#op">Operations</a></li>
				<li><a href="#sa">Site Adaptation</a></li>
			</ol>
		</li>
	</ol>
	<hr>
	<div>
		<h2><a name="fr">Functional Requirements</a></h2>
		<p>Система должна проверять количество картинок, которые запросил пользователь и возвращать код ошибки 400, если оно превышает разумные пределы.</p>
		<p>Так как взаимодействие происходит через единственный URL запрос без агрегации пользовательских данных, то проверок на правильность данных не потребуется, как и на корректность последовательности действий.</p>
		<p>Во время работы сервиса могут возникнуть ошибки, о чем он должен сообщить пользователю кодом ошибки 500.</p>
		<p>Сервис не предусматривает форм обратной связи, а здоровье сервиса отслеживается метриками работоспособности сервиса.</p>
	</div>
	<div>
		<h2><a name="eir">External Interface Requirements</a></h2>
		<div>
			<h3><a name="ui">User Interface</a></h3>
			<p>Пользовательским интерфейсом выступает браузер (или командная строка для продвинутых пользователей). Дополнительных требований к взаимодействию между пользователем и интерфейсом помимо тех, которые есть у стандартных браузеров, нет.</p>
		</div>
		<div>
			<h3><a name="hi">Hardware Interface</a></h3>
			<p>Интерфейсом выступает PC или мобильное устройство.</p>
		</div>
		<div>
			<h3><a name="si">Software Interfaces</a></h3>
			<p>Интерфейсом выступает браузер и ОС пользователя, которые нужны для сохранения архива с картинками.</p>
		</div>
		<div>
			<h3><a name="ci">Communications Interfaces</a></h3>
			<p>Стандартный способ взаимодействия с веб-сервисом - браузер. Взаимодействие между этим сервисом и браузером происходит по протоколу HTTP 1.2 (не HTTP 2.0, чтобы поддерживать старые устройства, версии браузеров и библиотек)</p>
		</div>
	</div>
	<div>
		<h2><a name="performance">Performance Requirements</a></h2>
		<p>Мы оцениваем число пользователей сервиса как 1.000.000, так как сообщается, что у популярного сервиса OpenSea чуть более 1 миллиона пользователей [2]. Мы рассчитываем, что отдельный пользователь будет использовать сервис часто в короткий промежуток времени. Например, 30 запросов подряд в один день (примерно столько дается пользователю-новичку на платформе DALL-E-2 [3]), но после этого дня пользователь более недели не будет возвращаться к сервису. Поэтому максимальное количество запросов, которые может обрабатывать сервисом одновременно (пропускная способность) - 10.</p>
		<p>95% запросов должны обрабатываться менее чем за 5 секунд. Речь идет о времени от запроса пользователя до начала получения архива с картинками. Гарантии на время скачивания связаны со скоростью интернет-соединения пользователя.</p>
		<p>Тип входной информации, которую обрабатывает сервис - HTTP запросы типа GET (пользовательские данные не храним, поэтому этого вида достаточно).</p>
	</div>
	<div>
		<h2><a name="design">Design Constraints</a></h2>
		<p>Дизайн системы изображен на картинке ниже.</p>
		<img src="../design.png">
		<p>Сервис состоит из машин обработки запросов, машин раздачи файлов конфигурации, машин балансировки нагрузки, БД с логами, а также машины агрегации метрик функционирования сервиса.</p>
		<p>Преимущества дизайна:</p>
		<ul>
			<li>Простая масштабируемость</li>
			<li>Просто добиться единственности версии файлов конфигурации</li>
		</ul>
		<p>Недостатки дизайна:</p>
		<ul>
			<li>Каждая машина раздачи файлов конфигурации должна выдерживать двойную нагрузку при выкатке новой версии файлов конфигурации</li>
			<li>Нет агрегации пользовательских данных, то есть нельзя сделать индивидуальный ответ на запрос</li>
		</ul>
		<div>
			<h3><a name="hl">Hardware Limitations</a></h3>
			<p>Сервис использует аппараты Yandex Cloud с 8 ГБ ОЗУ и 100% CPU Intel Ice Lake.</p>
		</div>
	</div>
	<div>
		<h2><a name="attributes">Attributes</a></h2>
		<p>Далее мы предлагаем метрики, по которым считаем, насколько сервис удовлетворяет требованиям.</p>
		<div>
			<h3><a name="av">Availability</a></h3>
			<p>В целях наблюдение доступности сервиса мы следим за скоростью выполнения запроса и количеством ошибок. Ошибка определяется как HTTP ответы с кодом 500-599, скорость выполнения запроса считается как время от установки сетевого соединения до начала отправки архива. Также к ошибке относится нарушение целостности архива, которая приводит к ошибке чтения целевым ПО.</p>
			<p>Каждую минуту мы фиксируем 95-ый перцентиль времени выполнения запросов (то есть 95% запросов в этой минуте были выполнены не более чем за это время), а также наличие ошибок. Если в минуте этот перцентиль превысил 5 секунд или сервер вернул хотя бы одну ошибку мы считаем эту минуту “плохой”, иначе “хорошей”. Мы считаем индикатор доступности каждый месяц как 1 - (число плохих минут) / (число минут в месяце).</p>
			<p>Индикатор доступности должен быть 99%. Если этот индикатор падает ниже этого числа, то любые обновления сервиса прекращаются, пока причина недоступности не будет устранена. Решением может стать использование предыдущей версии сервиса или новой версией с исправлением ошибок.</p>
			<p>Мы не вводим метрики доступности для отдельных серверных машин, а только для всего сервиса целиком.</p>
		</div>
		<div>
			<h3><a name="se">Security</a></h3>
			<p>Сервис не хранит и не обрабатывает пользовательские данные. К пользовательским данным не относятся заголовки запросов к сервису. Сервис хранит анонимную историю запросов в виде логов в целях обработки ошибок.</p>
			<p>В целях безопасности доступ к обновлению сервиса ограничен профилями администраторов на соответствующей платформе (Yandex Cloud/Kubernetes). Изменения в исходный код также ограничены профилями команды разработки средствами GitHub.</p>
			<p>Целостность данных отправляемого архива проверяется на стороне сервиса.</p>
		</div>
		<div>
			<h3><a name="ma">Maintainability</a></h3>
			<p>Так как команда разработки состоит из 3 человек и планов на расширения нет, то разделения на модули (и/или микросервисы) условное и не влияет на разделение зон ответственности. Иными словами, для удобства поддержки сервиса дополнительных организационных абстракций/групп/зон ответственности не вводится.</p>
			<p>Так как команда маленькая, то использование дополнительных инструментов сводится на минимум для ускорения качественной составляющей сервиса. Также для команды не ставится цель ускорения процесса выкатки релизов сервиса и прочих процессов, не связанных непосредственно с реализацией/исправлением функциональности.</p>
			<p>Метрик по оценке качества самого кода не вводится (в том числе метрики оценки ошибок, Bug-free policy и тд).</p>
		</div>
		<div>
			<h3><a name="tr">Transferability/Conversion</a></h3>
			<p>Процент кода, зависимого от операционной системы, должен быть 0%. Для этого используется легко портируем язык программирования Python 3.10 (и соответствующий ему интерпретатор или компилятор на C++20, C11) и соответствующие портируемые библиотеки.</p>
		</div>
	</div>
	<div>
		<h2><a name="requirements">Other Requirements</a></h2>
		<div>
			<h3><a name="op">Operations</a></h3>
			<p>Интерактивность взаимодействия с пользователем в самом сервисе непосредственно нет. То есть операции скачивания архива и обращения к сервису можно прервать, но инструментами браузера или другого сетевого ПО. Так например можно прервать скачивание архива.</p>
			<p>В сервисе нет операции по восстановлению данных, в том числе нет операции по обращению к предыдущей версии приложения.</p>
		</div>
		<div>
			<h3><a name="sa">Site Adaptation</a></h3>
			<p>Так как для использования сервиса нужен браузер, а не отдельное ПО, а общение происходит по протоколу HTTP, то потребности в адаптации нет.</p>
		</div>
	</div>
	<hr>
	<div>
		<a href="../index.html#maintable">К содержанию</a>
	</div>
</body>